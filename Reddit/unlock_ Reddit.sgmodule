#!name=Unlock Reddit
#!desc=过滤推广, 关闭 subreddit 的 NSFW 提示.

[Url Rewrite]

^https?://oauth\.reddit\.com/api/comments_page_ads\.json - reject

[Script]
Reddit = type=http-response,pattern=^https?:\/\/gql\.reddit\.com,requires-body=1,max-size=0,timeout=30,script-path=https://raw.githubusercontent.com/DevCoz/Ruleset/Pv/Reddit/reddit.js
premium = type=http-response,pattern=^https?://oauth.reddit.com/api/v1/me.json ,requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/DevCoz/Ruleset/Pv/Reddit/premium.js
pref = type=http-response,pattern=^https?://oauth.reddit.com/api/v1/me/prefs.json,requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/DevCoz/Ruleset/Pv/Reddit/pref.js
newsAD = type=http-response,pattern=^https?://oauth.reddit.com/user/RedditNewsTopics/m/[\w\+]+/hot.json,requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/DevCoz/Ruleset/Pv/Reddit/newsAD.js
newsAD = type=http-response,pattern=^https?://oauth.reddit.com/r/\w+/comments/.+\.json\?.+,requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/DevCoz/Ruleset/Pv/Reddit/newsAD.js
redditAD = type=http-response,pattern=^https?://gql.reddit.com,requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/DevCoz/Ruleset/Pv/Reddit/redditAD.js
outlink = type=http-response,pattern=^https?://out.reddit.com/.*url=(https?[\w%\.]+).*,requires-body=0,max-size=0,script-path=https://raw.githubusercontent.com/DevCoz/Ruleset/Pv/Reddit/outlink.js


[MITM]
hostname = %APPEND% oauth.reddit.com, gql.reddit.com, out.reddit.com

